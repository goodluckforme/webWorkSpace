<!DOCTYPE >
<html>

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" type="text/css" href="css/mui.min.css" />
		<title>首页</title>
		<style type="text/css">
			html,
			body {
				background-color: #EFEFF4;
			}
			
			.mui-bar {
				font-size: 17px;
				font-weight: normal;
			}
			
			.mainContainer {
				z-index: 9999;
			}
			
			#userheader {
				text-align: center;
				/*让div内部文字居中*/
				border-radius: 20px;
				margin: 40px 20px
			}
		</style>
	</head>

	<div class="mui-off-canvas-wrap mui-draggable">
		<!--侧滑菜单部分-->
		<aside id="offCanvasSide" class=" mui-off-canvas-left">
			<div id="drawerContainer" class="mui-scroll-wrapper">
				<div class="mui-scroll">
					<div id="userheader">
						<img style="height: 80px;width: 80px;" src="http://avatar.csdn.net/4/B/5/3_qq_20330595.jpg" \>
						<p style="margin: 20px 0px ;"><span>想要一间木屋，静静的喝咖啡</span></p>
					</div>
					<ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
						<li class="mui-table-view-cell">
							<a class="mui-navigate-right" href="home/mycollection.html" id="collection">
								我的收藏
							</a>
						</li>
						<li class="mui-table-view-cell">
							<a class="mui-navigate-right" id="about_project" href="https://blog.csdn.net/qq_20330595/article/list">
								about me
							</a>
						</li>
						<li class="mui-table-view-cell">
							<a class="mui-navigate-right" id="about_project" href="http://www.wanandroid.com/index">
								玩Android官网
							</a>
						</li>
						<li class="mui-table-view-cell">
							<a class="mui-navigate-right" id="about_hbuilder" href="http://dev.dcloud.net.cn/mui/">
								Hbuilder官方
							</a>
						</li>
						<li class="mui-table-view-cell">
							<a class="mui-navigate-right" id="about_hbuilder" href="https://github.com/goodluckforme/webWorkSpace/tree/master/Demo">
								项目地址
							</a>
						</li>
					</ul>
				</div>
			</div>
		</aside>

		<!--内容页部分-->
		<div class="mui-inner-wrap">
			<header class="mui-bar mui-bar-nav">
				<a id="drawerButton" href="#offCanvasSide" class="mui-icon mui-action-menu mui-icon-bars mui-pull-left"></a>
				<h1 id="title" class="mui-title">玩安卓MUI版</h1>
			</header>
			<div class="mui-content mui-scroll-wrapper">
				<nav id="nav_tabs" class="mui-bar mui-bar-tab">
					<a class="mui-tab-item mui-active" href="home/home.html">
						<span class="mui-icon mui-icon-home"></span>
						<span class="mui-tab-label">首页</span>
					</a>
					<a class="mui-tab-item" href="home/knowledge_system.html">
						<span class="mui-icon mui-icon-bars"><!--<span class="mui-badge">9</span>--></span>
						<span class="mui-tab-label">知识体系</span>
					</a>
					<a class="mui-tab-item" href="home/website_Navigation.html">
						<span class="mui-icon mui-icon-flag"></span>
						<span class="mui-tab-label">网站导航</span>
					</a>
					<a class="mui-tab-item" href="home/project.html">
						<span class="mui-icon mui-icon-eye"></span>
						<span class="mui-tab-label">项目</span>
					</a>
				</nav>
				<div id="changeContainer" class="mui-content">
					<p style="margin: 10px;">侧滑目前和底部导航栏不兼容</p>
				</div>
			</div>
			<div class="mui-off-canvas-backdrop"></div>
		</div>
	</div>
	<script src="js/mui.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		//用子页面抱起来试下
		mui.init({
			swipeBack: false, //启用右滑关闭功能,
			//			subpages: [{
			//				url: 'home/widget/slip_view.html',
			//				id: 'slip_view.html',
			//				styles: {
			//
			//				},
			//				extras: {}
			//			}]
		});

		//		//主容器
		//		var mainContainer = mui('#mainContainer');
		//		//侧滑部分
		//var drawerContainer = document.getElementById("drawerContainer");
		//
		//		//设置侧滑
		//		var offCanvasSide = document.getElementById("offCanvasSide");
		//		offCanvasSide.classList.remove('mui-transitioning');
		//		var classList = mainContainer[0].classList;
		//		offCanvasSide.setAttribute('style', '');
		//		classList.remove('mui-slide-in');
		//		classList.remove('mui-scalable');
		//		classList.add('mui-slide-in');
		//		mainContainer.offCanvas().refresh();
		//
		//		//主界面‘显示侧滑菜单’按钮的点击事件
		//		//mainContainer.offCanvas('show');
		//主界面和侧滑菜单界面均支持区域滚动；
		mui('#drawerContainer').scroll();
		var drawerButton = document.getElementById("drawerButton");
		var navTabs = document.getElementById("nav_tabs");
		drawerButton.addEventListener('tap', function() {
			var isShown = mui('.mui-off-canvas-wrap').offCanvas().isShown();
			//			alert('侧滑 ---isShown======' + isShown);
			if(isShown) {
				plus.webview.show(activeTab, "fade-in", 300);
			} else {
				plus.webview.hide(activeTab);
			}
		});
		//
		//		document.querySelector('.mui-off-canvas-wrap').addEventListener('shown', function(event) {
		//			//			alert('侧滑开启 ---手指居然必须跟随移动才会触发');
		//			plus.webview.hide(activeTab);
		//		})

		document.querySelector('.mui-off-canvas-wrap').addEventListener('hidden', function(event) {
			//			alert('侧滑关闭---手指居然必须跟随移动才会触发');
			plus.webview.show(activeTab);
		})
		//主界面容器  关闭收拾
		document.querySelector('.mui-inner-wrap').addEventListener('drag', function(event) {
			event.stopPropagation();
		});
		var subpages = ['home/home.html', 'home/knowledge_system.html',
			'home/project.html', 'home/website_Navigation.html'
		];
		var subpage_style = {
			top: '45px',
			bottom: '51px',
		};

		//创建子页面，首个选项卡页面显示，其它均隐藏；
		mui.plusReady(function() {
			var self = plus.webview.currentWebview();
			for(var i = 0; i < 4; i++) {
				var temp = {};
				var sub = plus.webview.create(subpages[i], subpages[i], subpage_style);
				if(i > 0) {
					sub.hide();
				} else {
					temp[subpages[i]] = "true";
					mui.extend(aniShow, temp);
				}
				self.append(sub);
			}
		});
		//当前激活选项
		var activeTab = subpages[0];
		var title = document.getElementById("title");
		var aniShow = {};

		//设置点击导航栏点击事件
		mui('.mui-bar-tab').on('tap', 'a', function(e) {
			var targetTab = this.getAttribute('href');
			if(targetTab == activeTab) {
				return;
			}
			//更换标题 
			title.innerHTML = this.querySelector('.mui-tab-label').innerHTML;
			//显示目标选项卡
			//若为iOS平台或非首次显示，则直接显示
			if(mui.os.ios || aniShow[targetTab]) {
				plus.webview.show(targetTab);
			} else {
				//否则，使用fade-in动画，且保存变量
				var temp = {};
				temp[targetTab] = "true";
				mui.extend(aniShow, temp);
				if(!mui.os.plus) {
					location.href = targetTab;
				} else {
					plus.webview.show(targetTab, "fade-in", 300);
				}
			}
			//隐藏当前;
			if(mui.os.plus) {
				plus.webview.hide(activeTab);
			}
			//更改当前活跃的选项卡
			activeTab = targetTab;
		});
		var _openw;
		//设置侧滑的点击事件
		mui('.mui-table-view').on('tap', 'a', function() {
			var herf = this.href;
			var title = this.innerText;
			//alert(herf);
			switch(this.id) {
				case 'collection':
				case 'about_project':
				case 'about_hbuilder':
					//非plus环境，直接走href跳转
					if(!mui.os.plus) {
						location.href = href;
						return;
					}
					//方法一
					_openw = mui.openWindow({
						url: herf,
						id: herf,
						//						keyEventBind: {
						//							backbutton: false //关闭back按键监听
						//						},
						styles: { // 窗口参数 参考5+规范中的WebviewStyle,也就是说WebviewStyle下的参数都可以在此设置
							titleNView: { // 窗口的标题栏控件
								autoBackButton: true,
								titleText: title, // 标题栏文字,当不设置此属性时，默认加载当前页面的标题，并自动更新页面的标题
								titleColor: "#000000", // 字体颜色,颜色值格式为"#RRGGBB",默认值为"#000000"
								titleSize: "17px", // 字体大小,默认17px
								backgroundColor: "#F7F7F7", // 控件背景颜色,颜色值格式为"#RRGGBB",默认值为"#F7F7F7"
								progress: { // 标题栏控件的进度条样式
									color: "#00FF00", // 进度条颜色,默认值为"#00FF00"  
									height: "2px" // 进度条高度,默认值为"2px"         
								},
								splitLine: { // 标题栏控件的底部分割线，类似borderBottom
									color: "#CCCCCC", // 分割线颜色,默认值为"#CCCCCC"  
									height: "1px" // 分割线高度,默认值为"2px"
								}

							}
						},
						waiting: {
							autoShow: true, //自动显示等待框，默认为true
							title: '正在加载...', //等待对话框上显示的提示内容
						}
					});
					_openw.show("slide-in-right", 300);
					break;
			}
		});

		mui.back = function() {
			if(_openw) {
				_openw.close();
				_openw = null;
			} else if(mui('.mui-off-canvas-wrap').offCanvas().isShown()) {
				//触发submit按钮的点击事件
				//mui.trigger(drawerButton, 'tap');
				mui('.mui-off-canvas-wrap').offCanvas('close');
			} else {
				//多次点击返回键  回到首页
				var first_tab = navTabs.children[0];
				mui.trigger(first_tab, 'tap');
				for(var i = 0; i < navTabs.children.length; i++) {
					navTabs.children[i].classList.remove('mui-active');
				}
				first_tab.classList.add('mui-active');
			}
		}
	</script>

</html>